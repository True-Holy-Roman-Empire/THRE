namespace = THRE_Reform_Desire

#Maintenance_event; mainly calculating Religious Membersstates and Their Dev in the HRE
country_event = {
	id = THRE_Reform_Desire.1
	title = THRE_Reform_Desire.1.t
	desc = THRE_Reform_Desire.1.d
	picture = ai_only
	hidden = yes
	is_triggered_only = yes

	immediate = {
		Reset_HRE_Religion_Counting_Variables = yes
		every_country = {
			limit = {
				is_part_of_hre = yes
			}
			PREV = {
				change_variable = {
					which = HRE_Members
					value = 1
				}
				export_to_variable = {
					variable_name = TAG_Development
					value = total_development
				}
				change_variable = {
					which = HRE_Development
					value = TAG_Development
				}			
			}
			trigger_switch = {
				on_trigger = has_country_flag
				catholic_religion_flag = {
					Count_Religious_Members = { Religion = Catholic }
				}
				sunni_religion_flag = {
					Count_Religious_Members = { Religion = Sunni }
				}
				orthodox_religion_flag = {
					Count_Religious_Members = { Religion = Orthodox }
				}
				coptic_religion_flag = {
					Count_Religious_Members = { Religion = Coptic }
				}
			}
		}
		#Global checks
		Calc_Religious_Percentages = { Religion = Catholic }
		Calc_Religious_Percentages = { Religion = Sunni }
		Calc_Religious_Percentages = { Religion = Orthodox }
		Calc_Religious_Percentages = { Religion = Coptic }
	}
	option = {
	}
}