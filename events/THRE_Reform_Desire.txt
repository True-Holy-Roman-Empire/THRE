namespace = THRE_Reform_Desire

#Maintenance_event; mainly calculating Religious Membersstates and Their Dev in the HRE
country_event = {
	id = THRE_Reform_Desire.1
	title = THRE_Reform_Desire.1.t
	desc = THRE_Reform_Desire.1.d
	picture = ai_only
	hidden = yes
	is_triggered_only = yes

	immediate = {
		Reset_HRE_Religion_Counting_Variables = yes
		every_country = {
			limit = {
				is_part_of_hre = yes
			}
			PREV = {
				change_variable = {
					which = HRE_Members
					value = 1
				}
				export_to_variable = {
					variable_name = TAG_Development
					value = total_development
				}
				change_variable = {
					which = HRE_Development
					value = TAG_Development
				}			
			}
			trigger_switch = {
				on_trigger = has_country_flag
				catholic_religion_flag = {
					Count_Religious_Members = { Religion = Catholic }
				}
				sunni_religion_flag = {
					Count_Religious_Members = { Religion = Sunni }
				}
				orthodox_religion_flag = {
					Count_Religious_Members = { Religion = Orthodox }
				}
				coptic_religion_flag = {
					Count_Religious_Members = { Religion = Coptic }
				}
			}
		}
		#Global checks
		Calc_Religious_Percentages = { Religion = Catholic }
		Calc_Religious_Percentages = { Religion = Sunni }
		Calc_Religious_Percentages = { Religion = Orthodox }
		Calc_Religious_Percentages = { Religion = Coptic }
	}
	option = {
		log = "Amount of HRE Members: [Root.HRE_Members.GetValue]"
		log = "Total HRE Development: [Root.HRE_Development.GetValue]"
		log = "Catholic Membersstates of HRE: [Root.HRE_Catholic_Memberstates.GetValue]"
		log = "Catholic Memberstates Development: [Root.HRE_Catholic_Members_Dev.GetValue]"
		log = "Catholic States Share of HRE Dev: [Root.HRE_Catholic_Dev_Percentage.GetValue]"
		log = "Sunni Membersstates of HRE: [Root.HRE_Sunni_Memberstates.GetValue]"
		log = "Sunni Memberstates Development: [Root.HRE_Sunni_Members_Dev.GetValue]"
		log = "Sunni States Share of HRE Dev: [Root.HRE_Sunni_Dev_Percentage.GetValue]"
		log = "Orthodox Membersstates of HRE: [Root.HRE_Catholic_Memberstates.GetValue]"
		log = "Orthodox Memberstates Development: [Root.HRE_Catholic_Members_Dev.GetValue]"
		log = "Orthodox States Share of HRE Dev: [Root.HRE_Orthodox_Dev_Percentage.GetValue]"
		log = "Coptic Membersstates of HRE: [Root.HRE_Coptic_Memberstates.GetValue]"
		log = "Coptic Memberstates Development: [Root.HRE_Coptic_Members_Dev.GetValue]"
		log = "Coptic States Share of HRE Dev: [Root.HRE_Coptic_Dev_Percentage.GetValue]"
	}
}