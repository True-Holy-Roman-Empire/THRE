namespace = THRE_Reform_Desire

#Maintenance_event; mainly calculating Religious Membersstates and Their Dev in the HRE
country_event = {
	id = THRE_Reform_Desire.1
	title = THRE_Reform_Desire.1.t
	desc = THRE_Reform_Desire.1.d
	picture = "INVENTION_eventPicture"
	hidden = yes
	is_triggered_only = yes

	trigger = {
		tag = AAA
	}

	immediate = {
		Reset_HRE_Religion_Counting_Variables = yes
		every_country = {
			limit = {
				is_part_of_hre = yes
			}
			ROOT = {
				change_variable = {
					which = HRE_Members_var
					value = 1
				}
			}
			set_variable = {
				which = HRE_Development_var
				value = 0
			}
			export_to_variable = {
				variable_name = HRE_Development_var
				value = total_development
			}
			ROOT = {
				change_variable = {
					which = HRE_Development_var
					which = PREV
				}
			}			
			if = {
				limit = {
					has_country_flag = catholic_religion_flag
				}
				Count_Religious_Members = { Religion_inp = Catholic }
			}
			else_if = {
				limit = {
					has_country_flag = sunni_religion_flag
				}
				Count_Religious_Members = { Religion_inp = Sunni }
			}
			else_if = {
				limit = {
					has_country_flag = orthodox_religion_flag
				}
				Count_Religious_Members = { Religion_inp = Orthodox }
			}
			else_if = {
				limit = {
					has_country_flag = coptic_religion_flag
				}
				Count_Religious_Members = { Religion_inp = Coptic }
			}
			set_variable = {		#Reset Variable to save space in savefiles
				which = HRE_Development_var
				value = 0
			}
		}
		#Global checks
		Calc_Religious_Percentages = { Religion_inp = Catholic }
		Calc_Religious_Percentages = { Religion_inp = Sunni }
		Calc_Religious_Percentages = { Religion_inp = Orthodox }
		Calc_Religious_Percentages = { Religion_inp = Coptic }
	}
	option = {
		name = THRE_Reform_Desire.1.opta
		log = "Amount of HRE Members: [Root.HRE_Members_var.GetValue]"
		log = "Total HRE Development: [Root.HRE_Development_var.GetValue]"
		log = "Catholic Membersstates of HRE: [Root.HRE_Catholic_Memberstates.GetValue]"
		log = "Catholic Memberstates Development: [Root.HRE_Catholic_Members_Dev.GetValue]"
		log = "Catholic States Share of HRE Dev: [Root.HRE_Catholic_Dev_Percentage.GetValue]"
		log = "Sunni Membersstates of HRE: [Root.HRE_Sunni_Memberstates.GetValue]"
		log = "Sunni Memberstates Development: [Root.HRE_Sunni_Members_Dev.GetValue]"
		log = "Sunni States Share of HRE Dev: [Root.HRE_Sunni_Dev_Percentage.GetValue]"
		log = "Orthodox Membersstates of HRE: [Root.HRE_Orthodox_Memberstates.GetValue]"
		log = "Orthodox Memberstates Development: [Root.HRE_Orthodox_Members_Dev.GetValue]"
		log = "Orthodox States Share of HRE Dev: [Root.HRE_Orthodox_Dev_Percentage.GetValue]"
		log = "Coptic Membersstates of HRE: [Root.HRE_Coptic_Memberstates.GetValue]"
		log = "Coptic Memberstates Development: [Root.HRE_Coptic_Members_Dev.GetValue]"
		log = "Coptic States Share of HRE Dev: [Root.HRE_Coptic_Dev_Percentage.GetValue]"
	}
}